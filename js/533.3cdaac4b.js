"use strict";(self["webpackChunkvue3"]=self["webpackChunkvue3"]||[]).push([[533],{5533:function(t,e,i){i.r(e),i.d(e,{default:function(){return S}});i(5729);var n=i(3673),a=i(2323);(0,n.dD)("data-v-aa266d7a");var l={class:"fit row justify-center items-center q-pa-lg"},o={class:"controll col fit row justify-center content-center items-center q-col-gutter-y-xl"},s={class:"relative-position q-py-xl",style:{width:"70px",height:"70px"}},u={class:"fit row justify-center items-center"},c={key:0},r={key:0,class:"fixed-full tip z-max flex flex-center column"},h=(0,n._)("div",{class:"text-white"},"使用耳机获得最佳效果",-1),y=(0,n._)("div",{class:"text-white"},"点击屏幕任意位置开始使用",-1);function d(t,e,i,d,f,p){var v=(0,n.up)("q-toggle"),k=(0,n.up)("q-btn"),g=(0,n.up)("q-knob"),m=(0,n.up)("q-icon"),w=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(w,{class:"column items-center fit",onClick:d.clickScreen},{default:(0,n.w5)((function(){return[(0,n._)("div",l,[(0,n.Wm)(v,{modelValue:d.settings.background.value,"onUpdate:modelValue":e[0]||(e[0]=function(t){return d.settings.background.value=t}),color:"green-4",label:"后台播放",class:"text-white","left-label":"","keep-color":""},null,8,["modelValue"]),d.playAllFlag?((0,n.wg)(),(0,n.j4)(k,{key:1,flat:"",icon:"fas fa-pause",class:"text-white",onClick:d.pauseAll},null,8,["onClick"])):((0,n.wg)(),(0,n.j4)(k,{key:0,flat:"",icon:"fas fa-play",class:"text-white",onClick:d.playAll},null,8,["onClick"])),(0,n.Wm)(k,{flat:"",icon:"fas fa-redo",class:"text-white",onClick:d.reset},null,8,["onClick"])]),(0,n._)("div",o,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.noises.source,(function(t,e){return(0,n.wg)(),(0,n.iD)("div",{class:"col-3 row justify-center items-center",key:e},[(0,n._)("div",s,[(0,n.Wm)(g,{modelValue:t.vol,"onUpdate:modelValue":function(e){return t.vol=e},size:"70px",thickness:.25,color:d.volcolorMap[t.status],class:"absolute-center",readonly:!t.onPlay},null,8,["modelValue","onUpdate:modelValue","thickness","color","readonly"]),(0,n.Wm)(k,{class:"absolute-center",color:d.volcolorMap[t.status],size:"14px",round:"",unelevated:"",ripple:!1,flat:"",onClick:function(e){return d.clickPlay(t)},loading:t.onLoading},{default:(0,n.w5)((function(){return[(0,n._)("div",u,[t.icon?((0,n.wg)(),(0,n.j4)(m,{key:1,name:t.icon},null,8,["name"])):((0,n.wg)(),(0,n.iD)("div",c,(0,a.zw)(t.icon?"":t.name),1))])]})),_:2},1032,["color","onClick","loading"])])])})),128))]),d.initFlag?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",null,[(0,n.Wm)(m,{size:"120px",name:"fas fa-headphones"})]),h,y,(0,n.Wm)(k,{flat:"",icon:"fas fa-redo",class:"text-white",onClick:d.reset},null,8,["onClick"])]))]})),_:1},8,["onClick"])}(0,n.Cn)();i(796),i(2535);var f=i(1959),p=i(9520),v=i.n(p),k=i(8910),g=i.n(k),m=i(9847),w=i.n(m),b=i(1253),P=i.n(b),x=i(4401),C=i.n(x),L=i(5429),A=i.n(L),j=function t(e,i,n,a){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:60;v()(this,t),this.key=e,this.name=i,this.url=n,this.icon=a,this.onPlay=!1,this.onLoading=!1,this.status="wait",this.vol=(0,f.iH)(l)},q=i(6395),_="settings",Z=function(){function t(){if(v()(this,t),!this.inited){if(this.has()){var e=this.load();this.background=(0,f.iH)(e.background),this.playList=e.playList}else this.init();this.inited=!0}}return g()(t,[{key:"changePlayList",value:function(t,e,i){this.playList||(this.playList={}),this.playList[t]={onPlay:e,vol:i},this.save()}},{key:"has",value:function(){return q.Z.has(_)}},{key:"load",value:function(){return q.Z.getItem(_)}},{key:"save",value:function(){q.Z.set(_,{background:this.background.value,playList:this.playList})}},{key:"init",value:function(){q.Z.remove(_),this.background=(0,f.iH)(!1),this.playList={},this.save(),location.reload(),this.inited=!0}}]),t}();A()(Z,"background",void 0),A()(Z,"playList",void 0),A()(Z,"inited",!1);var H=new Z,D=function(t){P()(i,t);var e=C()(i);function i(t){var a,l=t.key,o=t.name,s=t.url,u=t.icon,c=t.vol,r=void 0===c?60:c;return v()(this,i),a=e.call(this,l,o,s,u,r),a.buffer=null,a.source=null,a.cache=!1,a.gain=null,(0,n.YP)(a.vol,a.volChange(w()(a))),a}return g()(i,[{key:"volChange",value:function(t){var e=this;return function(i,n){e.gain&&(t.gain.gain.value=i/100,H.changePlayList(t.key,!0,i))}}},{key:"loadAudio",value:function(){var t=new XMLHttpRequest;t.open("GET",this.url,!0),t.responseType="arraybuffer";var e=this;t.onload=function(){e.ctx.decodeAudioData(t.response,(function(t){e.onLoading=!1,e.buffer=t,e.cache=!0,e.status="stop",e.playAudio()}))},t.send()}},{key:"playAudio",value:function(){this.onPlay?(this.pause(),H.changePlayList(this.key,this.onPlay,this.vol)):(this.source=this.ctx.createBufferSource(),this.source.buffer=this.buffer,this.source.loop=!0,this.gain.connect(this.ctx.destination),this.source.connect(this.gain),this.source.start(),this.onPlay=!0,this.status="play",H.changePlayList(this.key,this.onPlay,this.vol))}},{key:"pause",value:function(){this.onPlay&&(this.source.stop(),this.onPlay=!1,this.status="stop")}},{key:"play",value:function(){"stop"===this.status&&(this.click(),this.onPlay=!0,this.status="play")}},{key:"click",value:function(){null==this.ctx&&(this.ctx=new AudioContext),this.gain=this.ctx.createGain(),this.gain.gain.value=this.vol/100,null==this.buffer?(this.onLoading=!0,this.loadAudio()):this.playAudio()}}]),i}(j);A()(D,"AudioContext",window.AudioContext||window.webkitAudioContext),A()(D,"ctx",null);var V=function(t){P()(i,t);var e=C()(i);function i(t,a){var l,o=t.key,s=t.name,u=t.url,c=t.icon,r=t.vol,h=void 0===r?60:r;return v()(this,i),l=e.call(this,o,s,u,c,h),l.player=null,(0,n.YP)(l.vol,l.volChange(w()(l))),l}return g()(i,[{key:"volChange",value:function(t){return function(e,i){t.player&&(t.player.volume=e/100,H.changePlayList(t.key,!0,e))}}},{key:"loadAudio",value:function(){}},{key:"playAudio",value:function(){}},{key:"pause",value:function(){this.onPlay&&(this.player.pause(),this.onPlay=!1,this.status="stop")}},{key:"play",value:function(){"stop"===this.status&&(this.player.play(),this.onPlay=!0,this.status="play")}},{key:"click",value:function(){this.player||(this.player=new Audio(this.url),this.player.loop=!0,this.player.volume=this.vol/100),this.onPlay?(this.pause(),H.changePlayList(this.key,this.onPlay,this.vol)):(this.player.play(),this.onPlay=!0,this.status="play",H.changePlayList(this.key,this.onPlay,this.vol))}}]),i}(j),E=i(8825),O={name:"PageIndex",setup:function(){var t=(0,E.Z)(),e={brook:new j("brook","小溪","audio/brook.mp3",""),birds:new j("birds","小鸟","audio/birds.mp3",""),autumn:new j("autumn","秋风","audio/autumn.mp3",""),tide:new j("tide","潮汐","audio/tide.mp3",""),summer:new j("summer","夏夜","audio/summer.mp3",""),windChime:new j("windChime","风铃","audio/wind-chime.mp3",""),bonfire:new j("bonfire","篝火","audio/bonfire.mp3",""),rain:new j("rain","大雨","audio/rain.mp3","")},i=(0,f.iH)(!1),a={},l={};Object.keys(e).forEach((function(t){a[t]=new D(e[t])})),Object.keys(e).forEach((function(t){l[t]=new V(e[t],(0,f.iH)(null))})),(0,n.bv)((function(){}));var o=(0,f.qj)({source:{status:null}});H.background.value?o.source=l:o.source=a;var s={wait:"",stop:"amber-6",play:"light-green-6"},u={wait:"blue-grey-2",stop:"amber-6",play:"light-green-6"},c=function(){},r=function(){Object.keys(H.playList).forEach((function(t){var e=H.playList[t];o.source[t].vol=e.vol,e.onPlay&&o.source[t].click()}))},h=(0,f.iH)(!0),y=function(){Object.keys(H.playList).forEach((function(t){o.source[t].pause()})),h.value=!1},d=function(){Object.keys(H.playList).forEach((function(t){o.source[t].play()})),h.value=!0},p=function(){i.value||(i.value=!0,r())},v=function(t){t.click()},k=function(){t.dialog({title:"重置",message:"是否重置所有设置？",cancel:!0,persistent:!0,seamless:!0}).onOk((function(){H.init()})).onCancel((function(){})).onDismiss((function(){}))};return(0,n.YP)(H.background,(function(t){y(),o.source=t?l:a,r(),H.save(),h.value=!0})),{noises:o,bgcolorMap:s,volcolorMap:u,loaded:c,clickScreen:p,settings:H,initFlag:i,clickPlay:v,pauseAll:y,playAll:d,playAllFlag:h,reset:k}}},W=i(4379),z=i(8886),M=i(8240),Q=i(2098),F=i(4554),I=i(7518),Y=i.n(I);O.render=d,O.__scopeId="data-v-aa266d7a";var S=O;Y()(O,"components",{QPage:W.Z,QToggle:z.Z,QBtn:M.Z,QKnob:Q.Z,QIcon:F.Z})}}]);